(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{102:function(e,t,a){e.exports=a(130)},107:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(9),r=a.n(c);a(107),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,l,s=a(81),u=a.n(s),d=a(173),m=a(174),f=a(175),b=a(165),E=a(132),O=a(169),p=a(177),g=a(178),T=a(176),h=a(183),j=a(180),v=a(13),S=a(7),k=a(83),I={withCredentials:!0,headers:{"API-KEY":"199df811-bd09-48a1-81bc-ca38857c74a2"}},y=a.n(k).a.create(Object(S.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},I));!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(o||(o={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.High=2]="High",e[e.Urgent=3]="Urgent",e[e.Later=4]="Later"}(l||(l={}));var C=function(){return y.get("todo-lists")},A=function(e){return y.post("todo-lists",{title:e})},L=function(e,t){return y.put("todo-lists/".concat(e),{title:t})},w=function(e){return y.delete("todo-lists/".concat(e))},D=function(e){return y.get("todo-lists/".concat(e,"/tasks"))},P=function(e,t){return y.post("todo-lists/".concat(e,"/tasks"),{title:t})},N=function(e,t,a){return y.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},R=function(e,t){return y.delete("todo-lists/".concat(e,"/tasks/").concat(t))},x=function(){return y.get("auth/me")},G=function(e){return y.post("auth/login",e)},K=function(){return y.delete("auth/login")},_=function(e,t){e.messages.length?t(V(e.messages[0])):t(V("Some error occurred")),t(z("failed"))},U=function(e,t){t(V(e.message)),t(z("failed"))},H={isLoggedIn:!1},F=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},M={status:"idle",error:null,isInitialized:!1},z=function(e){return{type:"APP/SET-STATUS",status:e}},V=function(e){return{type:"APP/SET-ERROR",error:e}};function Y(e){return i.a.createElement(j.a,Object.assign({elevation:6,variant:"filled"},e))}function Z(){var e=Object(v.c)((function(e){return e.app.error})),t=Object(v.b)(),a=function(e,a){"clickaway"!==a&&t(V(null))};return i.a.createElement(h.a,{open:null!==e,autoHideDuration:6e3,onClose:a},i.a.createElement(Y,{onClose:a,severity:"error"},e))}var q=a(60),B=[],J=function(e,t){return{type:"CHANGE-TODOLIST-FILTER",id:e,filter:t}},W=function(e,t){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",id:e,entityStatus:t}},$=a(170),Q=a(131),X=a(44),ee=a(179),te=a(167),ae=i.a.memo((function(e){console.log("AddItemForm is called");var t=Object(v.c)((function(e){return e.app.status})),a=Object(n.useState)(""),c=Object(X.a)(a,2),r=c[0],o=c[1],l=Object(n.useState)(null),s=Object(X.a)(l,2),u=s[0],d=s[1],m=function(){r.trim()?(e.addItem(r.trim()),"succeeded"===t&&o("")):d("Title is required")};return i.a.createElement("div",null,i.a.createElement(ee.a,{variant:"outlined",value:r,onChange:function(e){o(e.currentTarget.value)},onKeyPress:function(e){null!==u&&d(null),"Enter"===e.key&&m()},error:!!u,label:"Title",helperText:u,disabled:e.disabled}),i.a.createElement(b.a,{color:"primary",onClick:m,disabled:e.disabled},i.a.createElement(te.a,null)))})),ne=i.a.memo((function(e){console.log("EditableSpan is called");var t=Object(v.c)((function(e){return e.app.status})),a=Object(n.useState)(!1),c=Object(X.a)(a,2),r=c[0],o=c[1],l=Object(n.useState)(e.title),s=Object(X.a)(l,2),u=s[0],d=s[1];return r?i.a.createElement(ee.a,{value:u,autoFocus:!0,onBlur:function(){u.trim()&&e.changeTitle(u.trim()),"succeeded"===t&&o(!1)},onChange:function(e){d(e.currentTarget.value)},onKeyPress:function(a){"Enter"===a.key&&(u.trim()&&e.changeTitle(u.trim()),"succeeded"===t&&o(!1))}}):i.a.createElement("span",{onDoubleClick:function(){!e.disabled&&o(!0)}},e.title)})),ie=a(168),ce=a(47),re={},oe=function(e,t,a){return{type:"CHANGE-TASK-ENTITY-STATUS",taskId:e,todolistId:t,entityStatus:a}},le=function(e,t,a){return function(n,i){var c=i().tasks[a].find((function(t){return t.id===e}));if(c){var r=Object(S.a)({deadline:c.deadline,description:c.description,priority:c.priority,startDate:c.startDate,status:c.status,title:c.title},t);n(z("loading")),n(oe(e,a,"loading")),N(a,e,r).then((function(i){0===i.data.resultCode?(n(function(e,t,a){return{type:"UPDATE_TASK",taskId:e,model:t,todoListId:a}}(e,t,a)),n(z("succeeded")),n(oe(e,a,"succeeded"))):(_(i.data,n),n(oe(e,a,"failed")))})).catch((function(t){U(t,n),n(oe(e,a,"failed"))}))}}},se=a(181),ue=i.a.memo((function(e){var t=Object(n.useCallback)((function(){e.removeTask(e.task.id)}),[e.removeTask,e.task.id]),a=Object(n.useCallback)((function(t){e.changeTaskStatus(e.task.id,t.currentTarget.checked?o.Completed:o.New)}),[e.changeTaskStatus,e.task.id]),c=Object(n.useCallback)((function(t){e.changeTaskTitle(e.task.id,t)}),[e.changeTaskTitle,e.task.id]);return i.a.createElement("li",{key:e.task.id,className:e.task.status===o.Completed?"is-done":""},i.a.createElement(se.a,{onChange:a,checked:e.task.status===o.Completed,color:"primary",disabled:"loading"===e.task.entityStatus}),i.a.createElement(ne,{title:e.task.title,changeTitle:c,disabled:"loading"===e.task.entityStatus}),i.a.createElement(b.a,{onClick:t,disabled:"loading"===e.task.entityStatus},i.a.createElement(ie.a,null)))})),de=i.a.memo((function(e){var t=e.todolist,a=e.demo,c=void 0!==a&&a;console.log("TodoList is called");var r=Object(v.b)();Object(n.useEffect)((function(){var e;c||r((e=t.id,function(t){t(z("loading")),D(e).then((function(a){var n=a.data.items;t(function(e,t){return{type:"SET_TASKS",tasks:e,todolistId:t}}(n,e)),t(z("succeeded"))})).catch((function(e){U(e,t)}))}))}),[]);var l=Object(v.c)((function(e){return e.tasks[t.id]})),s=l;"completed"===t.filter&&(s=l.filter((function(e){return e.status===o.Completed}))),"active"===t.filter&&(s=l.filter((function(e){return e.status===o.New})));var u=Object(n.useCallback)((function(e){r(function(e,t){return function(a){a(z("loading")),P(t,e).then((function(e){if(0===e.data.resultCode){var t=e.data.data.item;a(function(e){return{type:"ADD_TASK",task:e}}(t)),a(z("succeeded"))}else _(e.data,a)})).catch((function(e){U(e,a)}))}}(e,t.id))}),[r,t.id]),d=Object(n.useCallback)((function(e){r(function(e,t){return function(a){a(z("loading")),a(W(e,"loading")),L(e,t).then((function(n){0===n.data.resultCode?(a(function(e,t){return{type:"CHANGE-TODOLIST-TITLE",id:e,title:t}}(e,t)),a(z("succeeded")),a(W(e,"succeeded"))):(_(n.data,a),a(W(e,"failed")))})).catch((function(t){U(t,a),a(W(e,"failed"))}))}}(t.id,e))}),[r,t.id]),m=Object(n.useCallback)((function(){var e;r((e=t.id,function(t){t(z("loading")),t(W(e,"loading")),w(e).then((function(a){0===a.data.resultCode?(t(function(e){return{type:"REMOVE-TODOLIST",id:e}}(e)),t(z("succeeded"))):_(a.data,t)})).catch((function(e){U(e,t)}))}))}),[r,t.id]),f=Object(n.useCallback)((function(){r(J(t.id,"all"))}),[r,t.id]),E=Object(n.useCallback)((function(){r(J(t.id,"active"))}),[r,t.id]),p=Object(n.useCallback)((function(){r(J(t.id,"completed"))}),[r,t.id]),g=Object(n.useCallback)((function(e){r(function(e,t){return function(a){a(z("loading")),a(oe(e,t,"loading")),R(t,e).then((function(n){0===n.data.resultCode?(a(function(e,t){return{type:"REMOVE_TASK",taskId:e,todoListId:t}}(e,t)),a(z("succeeded"))):_(n.data,a)})).catch((function(e){U(e,a)}))}}(e,t.id))}),[r,t.id]),T=Object(n.useCallback)((function(e,a){r(le(e,{status:a},t.id))}),[r,t.id]),h=Object(n.useCallback)((function(e,a){r(le(e,{title:a},t.id))}),[r,t.id]);return i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement(ne,{title:t.title,changeTitle:d,disabled:"loading"===t.entityStatus}),i.a.createElement(b.a,{onClick:m,disabled:"loading"===t.entityStatus},i.a.createElement(ie.a,null))),i.a.createElement(ae,{addItem:u,disabled:"loading"===t.entityStatus}),i.a.createElement("ul",{style:{listStyle:"none",padding:"0"}},s.map((function(e){return i.a.createElement(ue,{key:e.id,removeTask:g,changeTaskStatus:T,changeTaskTitle:h,task:e})}))),i.a.createElement("div",null,i.a.createElement(O.a,{style:{margin:"3px"},size:"small",variant:"all"===t.filter?"contained":"outlined",color:"primary",onClick:f},"All"),i.a.createElement(O.a,{style:{margin:"3px"},size:"small",variant:"active"===t.filter?"contained":"outlined",color:"primary",onClick:E},"Active"),i.a.createElement(O.a,{style:{margin:"3px"},size:"small",variant:"completed"===t.filter?"contained":"outlined",color:"primary",onClick:p},"Completed")))})),me=a(14),fe=i.a.memo((function(e){var t=e.demo,a=void 0!==t&&t,c=Object(v.c)((function(e){return e.auth.isLoggedIn}));Object(n.useEffect)((function(){!a&&c&&o((function(e){e(z("loading")),C().then((function(t){e({type:"SET-TODOLISTS",todolists:t.data}),e(z("succeeded"))})).catch((function(t){U(t,e)}))}))}),[]);var r=Object(v.c)((function(e){return e.todoLists})),o=Object(v.b)(),l=Object(n.useCallback)((function(e){o(function(e){return function(t){t(z("loading")),A(e).then((function(e){if(0===e.data.resultCode){var a=e.data.data.item;t(function(e){return{type:"ADD-TODOLIST",todoList:e}}(a)),t(z("succeeded"))}else _(e.data,t)})).catch((function(e){U(e,t)}))}}(e))}),[o]);return c?i.a.createElement(i.a.Fragment,null,i.a.createElement($.a,{container:!0,style:{padding:"15px"}},i.a.createElement(ae,{addItem:l})),i.a.createElement($.a,{container:!0,spacing:4},r.map((function(e){return i.a.createElement($.a,{item:!0,key:e.id},i.a.createElement(Q.a,{elevation:5,style:{padding:"15px"}},i.a.createElement(de,{key:e.id,todolist:e,demo:a})))})))):i.a.createElement(me.a,{to:"/login"})})),be=a(184),Ee=a(166),Oe=a(171),pe=a(172),ge=a(90),Te=function(){var e=Object(v.b)(),t=Object(ge.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<3&&(t.password="Password should contain more than 2 characters"):t.password="Required",t},onSubmit:function(a){var n;e((n=a,function(e){e(z("loading")),G(n).then((function(t){0===t.data.resultCode?(e(F(!0)),e(z("succeeded"))):_(t.data,e)})).catch((function(t){U(t,e)}))})),t.resetForm()}});return Object(v.c)((function(e){return e.auth.isLoggedIn}))?i.a.createElement(me.a,{to:"/"}):i.a.createElement($.a,{container:!0,justify:"center"},i.a.createElement($.a,{item:!0,xs:4},i.a.createElement("form",{onSubmit:t.handleSubmit},i.a.createElement(be.a,null,i.a.createElement(Ee.a,null,i.a.createElement("p",null,"To log in, please get registered",i.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"}," here")),i.a.createElement("p",null,"or please use common test account credentials:"),i.a.createElement("p",null,"Email: free@samuraijs.com"),i.a.createElement("p",null,"Password: free")),i.a.createElement(Oe.a,null,i.a.createElement(ee.a,Object.assign({label:"*Email",margin:"normal",type:"email"},t.getFieldProps("email"))),t.touched.email&&t.errors.email?i.a.createElement("div",{style:{color:"red"}},t.errors.email):null,i.a.createElement(ee.a,Object.assign({type:"password",label:"*Password",margin:"normal"},t.getFieldProps("password"))),t.touched.password&&t.errors.password?i.a.createElement("div",{style:{color:"red"}},t.errors.password):null,i.a.createElement(pe.a,Object.assign({label:"Remember me",control:i.a.createElement(se.a,null)},t.getFieldProps("rememberMe"))),i.a.createElement(O.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))};var he=function(e){var t=e.demo,a=void 0!==t&&t;console.log("App is called");var c=Object(v.c)((function(e){return e.app})),r=c.status,o=c.isInitialized,l=Object(v.c)((function(e){return e.auth.isLoggedIn})),s=Object(v.b)();Object(n.useEffect)((function(){s((function(e){x().then((function(t){0===t.data.resultCode?e(F(!0)):_(t.data,e),e({type:"APP/SET-INITIALIZED",isInitialized:!0})})).catch((function(t){U(t,e)}))}))}),[]);var h=Object(n.useCallback)((function(){s((function(e){e(z("loading")),K().then((function(t){0===t.data.resultCode?(e(F(!1)),e(z("succeeded"))):_(t.data,e)})).catch((function(t){U(t,e)}))}))}),[s]);return o?i.a.createElement("div",null,i.a.createElement(Z,null),i.a.createElement(m.a,{position:"static"},i.a.createElement(f.a,null,i.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"menu"},i.a.createElement(T.a,null)),i.a.createElement(E.a,{variant:"h6"},i.a.createElement("span",{style:{margin:"15px"}},"Notes")),l&&i.a.createElement(O.a,{color:"inherit",onClick:h},"Log out"))),i.a.createElement("div",{style:{position:"relative"}},"loading"===r&&i.a.createElement("div",{className:u.a.progress},i.a.createElement(p.a,{color:"secondary"}))),i.a.createElement(g.a,{fixed:!0},i.a.createElement(me.d,null,i.a.createElement(me.b,{exact:!0,path:"/",render:function(){return i.a.createElement(fe,{demo:a})}}),i.a.createElement(me.b,{path:"/login",render:function(){return i.a.createElement(Te,null)}}),i.a.createElement(me.b,{path:"/404",render:function(){return i.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),i.a.createElement(me.a,{from:"*",to:"/404"})))):i.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},i.a.createElement(d.a,null))},je=a(41),ve=a(89),Se=Object(je.c)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-TODOLISTS":var a=Object(S.a)({},e);return t.todolists.forEach((function(e){a[e.id]=[]})),a;case"SET_TASKS":var n=Object(S.a)({},e);return n[t.todolistId]=t.tasks.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{entityStatus:"succeeded"})})),n;case"REMOVE_TASK":return Object(S.a)(Object(S.a)({},e),{},Object(ce.a)({},t.todoListId,e[t.todoListId].filter((function(e){return e.id!==t.taskId}))));case"ADD_TASK":var i=Object(S.a)({},e),c=i[t.task.todoListId];return i[t.task.todoListId]=[Object(S.a)(Object(S.a)({},t.task),{},{entityStatus:"succeeded"})].concat(Object(q.a)(c)),i;case"UPDATE_TASK":var r=Object(S.a)({},e),o=r[t.todoListId];return r[t.todoListId]=o.map((function(e){return e.id===t.taskId?Object(S.a)(Object(S.a)({},e),t.model):e})),r;case"ADD-TODOLIST":return Object(S.a)(Object(S.a)({},e),{},Object(ce.a)({},t.todoList.id,[]));case"REMOVE-TODOLIST":var l=Object(S.a)({},e);return delete l[t.id],l;case"CHANGE-TASK-ENTITY-STATUS":var s=Object(S.a)({},e),u=s[t.todolistId];return s[t.todolistId]=u.map((function(e){return e.id===t.taskId?Object(S.a)(Object(S.a)({},e),{},{entityStatus:t.entityStatus}):e})),s;default:return e}},todoLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TODOLIST":return e.filter((function(e){return e.id!==t.id}));case"SET-TODOLISTS":return t.todolists.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{filter:"all",entityStatus:"succeeded"})}));case"ADD-TODOLIST":var a=Object(S.a)(Object(S.a)({},t.todoList),{},{filter:"all",entityStatus:"succeeded"});return[a].concat(Object(q.a)(e));case"CHANGE-TODOLIST-TITLE":return e.map((function(e){return e.id===t.id?Object(S.a)(Object(S.a)({},e),{},{title:t.title}):e}));case"CHANGE-TODOLIST-FILTER":return e.map((function(e){return e.id===t.id?Object(S.a)(Object(S.a)({},e),{},{filter:t.filter}):e}));case"CHANGE-TODOLIST-ENTITY-STATUS":return e.map((function(e){return e.id===t.id?Object(S.a)(Object(S.a)({},e),{},{entityStatus:t.entityStatus}):e}));default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(S.a)(Object(S.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(S.a)(Object(S.a)({},e),{},{error:t.error});case"APP/SET-INITIALIZED":return Object(S.a)(Object(S.a)({},e),{},{isInitialized:t.isInitialized});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(S.a)(Object(S.a)({},e),{},{isLoggedIn:t.value});default:return e}}}),ke=Object(je.d)(Se,Object(je.a)(ve.a));window.store=ke;var Ie=a(46);r.a.render(i.a.createElement(v.a,{store:ke},i.a.createElement(Ie.a,null,i.a.createElement(he,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){e.exports={progress:"App_progress__3J7Qh"}}},[[102,1,2]]]);
//# sourceMappingURL=main.f8c171f4.chunk.js.map